<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini‚Äëjeu C≈ìurs & Bombes</title>
  <meta name="description" content="Trouve 3 c≈ìurs pour gagner et d√©bloquer le lien Telegram." />
  <style>
    :root{
      --bg1:#0f1020;--bg2:#1a1446;--g1:#7c4dff;--g2:#00d4ff;--card:#121226;--text:#e8e9ff;--muted:#a9abcf;--accent:#41ffc5;--danger:#ff5c8a;
      --cell:#171737;--cell-hover:#22224a;--cell-border:#2b2b59;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 800px at 80% -10%,rgba(124,77,255,0.3),transparent),
                  radial-gradient(800px 600px at -10% 120%, rgba(0,212,255,0.25), transparent),
                  linear-gradient(160deg,var(--bg1),var(--bg2));
      display:grid; place-items:center; padding:24px;
    }
    .card{
      width:min(680px, 92vw); background:rgba(18,18,38,0.85); border:1px solid rgba(255,255,255,0.06);
      backdrop-filter: blur(8px); border-radius:24px; box-shadow:0 20px 60px rgba(0,0,0,0.45);
      overflow:hidden; position:relative;
    }
    .header{
      padding:20px 22px; display:flex; align-items:center; justify-content:space-between; gap:12px;
      border-bottom:1px solid rgba(255,255,255,0.06);
      background:linear-gradient(180deg, rgba(255,255,255,0.05), transparent);
    }
    h1{font-size:20px; line-height:1.2; margin:0; letter-spacing:.2px}
    .sub{font-size:13px; color:var(--muted)}
    .stats{display:flex; gap:10px; align-items:center}
    .pill{font-size:12px; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08)}
    .accent{background:linear-gradient(90deg,var(--g1),var(--g2)); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:700}

    .board-wrap{padding:18px 18px 22px}
    .board{
      display:grid; grid-template-columns: repeat(10, 1fr); gap:8px; user-select:none;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent); padding:12px; border-radius:20px;
      border:1px solid var(--cell-border);
    }
    .cell{
      display:grid; place-items:center; aspect-ratio:1/1; border-radius:14px; cursor:pointer;
      background:var(--cell); border:1px solid var(--cell-border); transition:transform .08s ease, background .2s ease, box-shadow .2s ease;
      font-size: clamp(18px, 3.5vw, 28px);
      color:#fff;
    }
    .cell:hover{ background:var(--cell-hover); transform: translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,0.25)}
    .cell.revealed{ cursor:default; background:linear-gradient(180deg, rgba(255,255,255,0.06), transparent)}

    .cell.heart{ box-shadow:0 0 0 2px rgba(65,255,197,0.25) inset}
    .cell.bomb{ box-shadow:0 0 0 2px rgba(255,92,138,0.22) inset}
    .emoji{ transform:translateY(1px)}

    .footer{ display:flex; justify-content:space-between; align-items:center; gap:12px; padding:14px 18px 18px}
    .btn{ appearance:none; border:none; border-radius:14px; padding:12px 16px; font-weight:700; color:#0b0b16; cursor:pointer;
      background:linear-gradient(90deg,var(--g1),var(--g2)); box-shadow:0 10px 28px rgba(0,212,255,0.25); transition: transform .08s ease, box-shadow .2s ease}
    .btn:hover{ transform:translateY(-1px); box-shadow:0 14px 34px rgba(0,212,255,0.33)}
    .btn.secondary{ background:rgba(255,255,255,0.08); color:var(--text); box-shadow:none; border:1px solid rgba(255,255,255,0.08)}

    /* Overlay (popup) */
    .overlay{ position:fixed; inset:0; display:none; place-items:center; background:rgba(7,8,16,0.6); backdrop-filter: blur(6px); z-index:40}
    .overlay.active{ display:grid }
    .modal{ width:min(560px,92vw); background:linear-gradient(180deg, rgba(255,255,255,0.06), transparent); border:1px solid rgba(255,255,255,0.12);
      border-radius:22px; padding:22px; text-align:center; position:relative; overflow:hidden }
    .modal h2{ margin:6px 0 8px; font-size:24px }
    .modal p{ margin:0; color:var(--muted) }
    .modal .actions{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:16px }
    .link-btn{ display:inline-flex; align-items:center; gap:10px; padding:12px 16px; border-radius:14px; font-weight:800; text-decoration:none; color:#0b0b16;
      background:linear-gradient(90deg,var(--g1),var(--g2)); box-shadow:0 10px 28px rgba(0,212,255,0.25) }
    .close-btn{ padding:12px 16px; border-radius:14px; background:rgba(255,255,255,0.08); color:var(--text); border:1px solid rgba(255,255,255,0.08); cursor:pointer }

    /* Confetti (CSS only) */
    .confetti{ position:absolute; inset:0; pointer-events:none; overflow:hidden }
    .confetti i{ position:absolute; top:-12px; width:8px; height:12px; background:linear-gradient(180deg,var(--g1),var(--g2)); opacity:.9;
      animation: drop 2.2s ease-in forwards; border-radius:2px; transform: rotate(var(--r, 0deg)); left:var(--l, 50%)}
    @keyframes drop{ 0%{ transform: translateY(-20px) rotate(var(--r,0deg)) } 100%{ transform: translateY(110vh) rotate(calc(var(--r,0deg) + 180deg)) }}

    /* Badges */
    .badges{ display:flex; gap:8px; align-items:center }
    .badge{ font-size:12px; padding:6px 10px; border-radius:999px; border:1px dashed rgba(255,255,255,0.16); color:var(--muted) }
    .counter{ font-weight:800 }

    /* Small */
    @media (max-width:480px){
      .header{ flex-direction:column; align-items:flex-start }
      .footer{ flex-direction:column; align-items:stretch }
      .btn{ width:100% }
    }
  </style>
</head>
<body>
  <div class="card" id="game">
    <div class="header">
      <div>
        <h1>üéØ Trouve <span class="accent">3 c≈ìurs</span> pour gagner</h1>
        <div class="sub">Grille 10√ó10 ‚Ä¢ Les bombes s'afficheront apr√®s ta victoire üí£</div>
      </div>
      <div class="stats">
        <div class="pill"><span class="counter" id="heartsFound">0</span>/<strong>3</strong> ‚ù§Ô∏è</div>
        <div class="pill">üí£ cach√©es</div>
      </div>
    </div>

    <div class="board-wrap">
      <div class="board" id="board" aria-label="Grille de jeu 10 par 10"></div>
    </div>

    <div class="footer">
      <div class="badges">
        <span class="badge">Ultra simple</span>
        <span class="badge">Optimis√© mobile</span>
        <span class="badge">Chargement instantan√©</span>
      </div>
      <div>
        <button class="btn secondary" id="resetBtn">üîÑ Recommencer</button>
      </div>
    </div>
  </div>

  <!-- Popup Victoire -->
  <div class="overlay" id="overlay" aria-hidden="true" role="dialog" aria-labelledby="winTitle">
    <div class="modal">
      <div class="confetti" id="confetti"></div>
      <h2 id="winTitle">üî• Bravo, tu as gagn√© !</h2>
      <p>Voici ton acc√®s au canal priv√© Telegram üëá</p>
      <div class="actions">
        <!-- ‚ö†Ô∏è Remplace l'URL ci-dessous par ton lien Telegram -->
        <a class="link-btn" id="tgLink" href="https://t.me/+82lm7hnDq3g5MWZk" target="_blank" rel="noopener">Rejoindre sur Telegram</a>
        <button class="close-btn" id="closePopup">Fermer</button>
      </div>
    </div>
  </div>

  <script>
    const GRID_SIZE = 10;
    const HEARTS_TO_WIN = 3;
    const TOTAL_BOMBS = 22; // Bombes affich√©es apr√®s la victoire (plac√©es uniquement l√† o√π l'utilisateur n'a pas cliqu√©)

    const boardEl = document.getElementById('board');
    const heartsFoundEl = document.getElementById('heartsFound');
    const resetBtn = document.getElementById('resetBtn');
    const overlay = document.getElementById('overlay');
    const closePopup = document.getElementById('closePopup');
    const confetti = document.getElementById('confetti');

    let clicked = new Set();
    let heartsFound = 0;
    let cells = [];

    function cellId(r,c){ return `${r}-${c}` }

    function buildBoard(){
      boardEl.innerHTML = '';
      cells = [];
      clicked.clear();
      heartsFound = 0;
      heartsFoundEl.textContent = '0';

      for(let r=0;r<GRID_SIZE;r++){
        for(let c=0;c<GRID_SIZE;c++){
          const btn = document.createElement('button');
          btn.className = 'cell';
          btn.setAttribute('data-r', r);
          btn.setAttribute('data-c', c);
          btn.setAttribute('aria-label','Case');
          btn.addEventListener('click', onCellClick, { once:false });
          boardEl.appendChild(btn);
          cells.push(btn);
        }
      }
    }

    function onCellClick(e){
      const el = e.currentTarget;
      if(el.classList.contains('revealed')) return;

      // Rig: toute case cliqu√©e devient un c≈ìur ‚úÖ
      el.classList.add('revealed','heart');
      el.innerHTML = '<span class="emoji" aria-hidden="true">‚ù§Ô∏è</span>';
      el.setAttribute('aria-label','C≈ìur');
      clicked.add(cellId(+el.dataset.r, +el.dataset.c));

      heartsFound++;
      heartsFoundEl.textContent = String(heartsFound);

      if(heartsFound >= HEARTS_TO_WIN){
        finishWithWin();
      }
    }

    function finishWithWin(){
      // Placer les bombes UNIQUEMENT l√† o√π l'utilisateur n'a pas cliqu√©
      const unclickedCells = cells.filter(b=>!b.classList.contains('revealed'));

      // M√©langer puis prendre TOTAL_BOMBS √©l√©ments (ou moins si pas assez)
      shuffle(unclickedCells);
      const bombs = unclickedCells.slice(0, Math.min(TOTAL_BOMBS, unclickedCells.length));

      bombs.forEach(b=>{
        b.classList.add('revealed','bomb');
        b.innerHTML = '<span class="emoji" aria-hidden="true">üí£</span>';
        b.setAttribute('aria-label','Bombe');
      });

      // D√©sactiver toutes les cases
      cells.forEach(b=> b.style.pointerEvents = 'none');

      // Afficher la popup (les bombes sont d√©j√† visibles derri√®re)
      openOverlay();
      burstConfetti();
    }

    function openOverlay(){
      overlay.classList.add('active');
      overlay.setAttribute('aria-hidden','false');
    }
    function closeOverlay(){
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden','true');
    }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function burstConfetti(){
      confetti.innerHTML = '';
      const n = 90;
      for(let i=0;i<n;i++){
        const p = document.createElement('i');
        p.style.setProperty('--l', Math.random()*100 + '%');
        p.style.setProperty('--r', (Math.random()*120-60) + 'deg');
        p.style.opacity = String(0.6 + Math.random()*0.4);
        p.style.width = (6 + Math.random()*6) + 'px';
        p.style.height = (10 + Math.random()*14) + 'px';
        confetti.appendChild(p);
      }
      // Nettoyage apr√®s animation
      setTimeout(()=>{ confetti.innerHTML=''; }, 2600);
    }

    resetBtn.addEventListener('click', buildBoard);
    closePopup.addEventListener('click', closeOverlay);

    // Init
    buildBoard();
  </script>
</body>
</html>
